# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type Board {
  """하위 게시판 목록"""
  childBoards: [Board!]!
  createdAt: DateTime!
  description: String
  id: Int!
  name: String!

  """부모 게시판"""
  parentBoard: Board
  parentId: Int

  """게시글 수"""
  postCount: Int!
  requiredRole: UserRole!
  slug: String!
  updatedAt: DateTime!
}

input BoardFilterInput {
  parentId: Int
  searchKeyword: String
  slug: String
  userRole: UserRole
}

input CreatePostInput {
  boardId: Int!
  content: String!
  title: String!
}

input CreateUserInput {
  email: String!
  name: String!
  password: String!
  userRole: UserRole!
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type LoginDto {
  accessToken: String!
  refreshToken: String!
  user: User!
}

input LoginInput {
  email: String!
  password: String!
}

type Mutation {
  """게시글 작성"""
  createPost(input: CreatePostInput!): Post!

  """회원가입"""
  createUser(input: CreateUserInput!): User!
  deletePost(id: Int!): Post!

  """회원 탈퇴 (Soft Delete)"""
  deleteUser(id: Int!): User!
  login(input: LoginInput!): LoginDto!
  updateMe(input: UpdateUserInput!): User!
  updatePost(input: UpdatePostInput!): Post!
}

type Post {
  """작성자 (탈퇴 시 null)"""
  author: User
  authorId: Int

  """게시판"""
  board: Board!
  boardId: Int!

  """댓글 수 (향후 구현)"""
  commentCount: Int!
  content: String!
  createdAt: DateTime!
  id: Int!
  scrapCount: Int!
  title: String!
  updatedAt: DateTime!
  viewCount: Int!
}

input PostFilterInput {
  authorId: Int
  boardId: Int
  minScrapCount: Int
  minViewCount: Int
  searchKeyword: String
  skip: Int = 0
  sort: PostSortInput
  take: Int = 20
}

input PostSortInput {
  createdAt: SortOrder = DESC
  viewCount: SortOrder
}

type Query {
  """전체글 게시판"""
  allPosts(skip: Int! = 0, take: Int! = 20): [Post!]!

  """BEST 게시판 (조회수 10+ 기준)"""
  bestPosts(minViewCount: Int! = 10, take: Int! = 20): [Post!]!

  """게시판 단건 조회 (ID)"""
  board(id: Int!): Board!

  """게시판 단건 조회 (Slug)"""
  boardBySlug(slug: String!): Board!

  """게시판 목록 (필터링)"""
  boards(filter: BoardFilterInput): [Board!]!
  me: User!

  """게시글 상세 조회 (조회수 증가)"""
  post(id: Int!): Post!

  """게시글 목록 (필터링 + 페이지네이션)"""
  posts(filter: PostFilterInput): [Post!]!

  """사용자 단건 조회"""
  user(id: Int!): User!

  """활성 사용자 목록"""
  users: [User!]!
}

"""정렬 방향"""
enum SortOrder {
  ASC
  DESC
}

input UpdatePostInput {
  boardId: Int
  content: String
  id: Int!
  title: String
}

input UpdateUserInput {
  id: Int!
  name: String
}

type User {
  createdAt: DateTime!
  email: String!
  id: Int!
  name: String!
  updatedAt: DateTime!
  userRole: UserRole!
}

"""사용자 권한"""
enum UserRole {
  ADMIN
  USER
}